<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Store Manager ‚Äî Single-file App</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --muted:#9aa7bd;
    --accent:#6ee7b7;
    --accent-2:#60a5fa;
    --danger:#fb7185;
    --glass: rgba(255,255,255,0.03);
    --radius:14px;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#061123 0%, #071428 100%);color:#e6eef8}
  .app {
    max-width:1100px;
    margin:28px auto;
    padding:20px;
    border-radius:18px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 10px 30px rgba(2,6,23,0.7);
    display:grid;
    grid-template-columns: 260px 1fr;
    gap:18px;
  }

  /* Sidebar */
  .sidebar {
    background:var(--card);
    border-radius:var(--radius);
    padding:16px;
    height:fit-content;
    position:sticky;
    top:28px;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
  }
  .brand {
    display:flex;gap:12px;align-items:center;margin-bottom:14px;
  }
  .logo {
    width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;align-items:center;justify-content:center;font-weight:700;color:#04233a;
    box-shadow:0 4px 10px rgba(99,102,241,0.08);
  }
  h1{font-size:16px;margin:0}
  .muted{color:var(--muted);font-size:13px}

  .tabs {margin-top:10px;display:flex;flex-direction:column;gap:8px}
  .tab-btn {
    display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;color:var(--muted);
    cursor:pointer;border:1px solid transparent;
  }
  .tab-btn.active{background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));color:#e8f9f0;border-color:rgba(255,255,255,0.02)}
  .badge{margin-left:auto;background:rgba(255,255,255,0.04);padding:4px 8px;border-radius:999px;font-size:12px}

  /* Main content */
  .panel {
    background:var(--card);
    border-radius:var(--radius);
    padding:18px;
    min-height:500px;
    box-shadow:0 8px 24px rgba(2,6,23,0.6);
  }

  .row {display:flex;gap:16px;align-items:center}
  .card {flex:1;background:var(--glass);padding:12px;border-radius:12px;color:var(--muted);display:flex;flex-direction:column;gap:8px}
  .card h3{margin:0;color:#e6eef8;font-size:14px}
  .stat{font-size:20px;font-weight:700;color:#fff}

  /* Inventory table */
  table {width:100%;border-collapse:collapse;margin-top:12px;font-size:13px}
  th,td{padding:10px;border-bottom:1px dashed rgba(255,255,255,0.03);text-align:left}
  th{color:var(--muted);font-weight:600}
  .small{font-size:12px;color:var(--muted)}
  .pill {padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.03);font-weight:600;font-size:13px}

  /* Form */
  .form-row{display:flex;gap:10px;margin-top:10px}
  label{font-size:13px;color:var(--muted)}
  input,select{background:transparent;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;color:#e6eef8;outline:none}
  .btn {padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700}
  .btn.accent{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#04233a}
  .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
  .remove {background:transparent;border:1px solid rgba(255,255,255,0.06);padding:6px 8px;border-radius:8px;color:var(--danger);cursor:pointer}

  /* Charts area */
  .charts {display:flex;gap:16px;margin-top:12px}
  canvas{background:transparent;border-radius:12px}

  /* Summary */
  .summary{margin-top:14px;padding:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border-radius:10px}
  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

  /* Responsive */
  @media (max-width:900px){
    .app{grid-template-columns:1fr; padding:12px}
    .sidebar{position:relative;top:0}
    .charts{flex-direction:column}
  }

</style>
</head>
<body>
  <div class="app" role="application" aria-label="Store manager app">
    <aside class="sidebar" aria-label="Navigation">
      <div class="brand">
        <div class="logo">SM</div>
        <div>
          <h1>Store Manager</h1>
          <div class="muted">Single-file demo</div>
        </div>
      </div>

      <div class="tabs" role="tablist" aria-orientation="vertical">
        <div class="tab-btn active" data-tab="dashboard" role="tab" aria-selected="true">üìä Dashboard <span class="badge" id="total-items-badge">0</span></div>
        <div class="tab-btn" data-tab="inventory" role="tab">üì¶ Inventory</div>
        <div class="tab-btn" data-tab="add" role="tab">‚ûï Add Item</div>
        <div class="tab-btn" data-tab="summary" role="tab">üìù Summary</div>
      </div>

      <hr style="margin:12px 0;border:none;height:1px;background:rgba(255,255,255,0.02)">

      <div class="muted" style="font-size:13px">Quick actions</div>
      <div style="margin-top:10px;display:flex;gap:8px">
        <button class="btn accent" id="restock-all">Restock all</button>
        <button class="btn ghost" id="reset-sample">Reset</button>
      </div>

      <footer style="margin-top:18px">
        <div class="muted">Built with plain HTML/CSS/JS</div>
      </footer>
    </aside>

    <main>
      <!-- Dashboard -->
      <section id="dashboard" class="panel" data-panel>
        <div class="row">
          <div class="card">
            <h3>Total items</h3>
            <div class="stat" id="stat-total">0</div>
            <div class="small">Number of unique product SKUs</div>
          </div>
          <div class="card">
            <h3>Total stock</h3>
            <div class="stat" id="stat-stock">0</div>
            <div class="small">Sum of quantity across all items</div>
          </div>
          <div class="card">
            <h3>Estimated Revenue</h3>
            <div class="stat" id="stat-revenue">‚Çπ0</div>
            <div class="small">Based on price √ó sold</div>
          </div>
        </div>

        <div class="charts">
          <div style="flex:1;min-width:280px">
            <h3 style="margin:8px 0 6px 0">Sales by Category (Pie)</h3>
            <canvas id="pieChart" width="400" height="300" aria-label="Pie chart sales by category" role="img"></canvas>
          </div>
          <div style="flex:1;min-width:300px">
            <h3 style="margin:8px 0 6px 0">Top Items by Sales (Bar)</h3>
            <canvas id="barChart" width="600" height="300" aria-label="Bar chart top items by sales" role="img"></canvas>
          </div>
        </div>
      </section>

      <!-- Inventory -->
      <section id="inventory" class="panel" data-panel hidden>
        <h2 style="margin:0 0 8px 0">Inventory</h2>
        <div class="muted small">Manage current products ‚Äî click remove to delete an SKU</div>

        <table aria-label="Inventory table">
          <thead>
            <tr><th>SKU</th><th>Name</th><th>Category</th><th>Price (‚Çπ)</th><th>Stock</th><th>Sold</th><th></th></tr>
          </thead>
          <tbody id="inventory-body">
            <!-- rows injected -->
          </tbody>
        </table>
      </section>

      <!-- Add -->
      <section id="add" class="panel" data-panel hidden>
        <h2 style="margin:0 0 8px 0">Add item</h2>
        <div class="muted small">Add a new product to inventory (updates charts)</div>

        <div style="margin-top:12px;display:flex;flex-direction:column;gap:10px;max-width:760px">
          <div class="form-row">
            <div style="flex:1">
              <label for="inp-sku">SKU</label><br>
              <input id="inp-sku" placeholder="e.g., SKU-101" />
            </div>
            <div style="flex:2">
              <label for="inp-name">Name</label><br>
              <input id="inp-name" placeholder="Product name" />
            </div>
          </div>

          <div class="form-row">
            <div style="flex:1">
              <label for="inp-category">Category</label><br>
              <select id="inp-category">
                <option>Electronics</option>
                <option>Groceries</option>
                <option>Clothing</option>
                <option>Accessories</option>
                <option>Stationery</option>
              </select>
            </div>
            <div style="flex:1">
              <label for="inp-price">Price (‚Çπ)</label><br>
              <input id="inp-price" type="number" min="0" placeholder="99" />
            </div>
            <div style="flex:1">
              <label for="inp-stock">Stock</label><br>
              <input id="inp-stock" type="number" min="0" placeholder="10" />
            </div>
            <div style="flex:1">
              <label for="inp-sold">Sold</label><br>
              <input id="inp-sold" type="number" min="0" placeholder="0" />
            </div>
          </div>

          <div style="display:flex;gap:8px;margin-top:6px">
            <button class="btn accent" id="add-item-btn">Add item</button>
            <button class="btn ghost" id="clear-form">Clear</button>
          </div>
        </div>
      </section>

      <!-- Summary -->
      <section id="summary" class="panel" data-panel hidden>
        <h2 style="margin:0 0 8px 0">Summary & Notes</h2>
        <div class="summary" id="summary-text">
          <!-- summary injected -->
        </div>

        <h3 style="margin-top:12px">Low stock items</h3>
        <div id="low-stock-list" style="margin-top:8px"></div>
      </section>
    </main>
  </div>

<script>
/*
  Store Manager single-file app
  - Sample data
  - Inventory add/remove
  - Pie and bar chart drawn with Canvas 2D
*/

const initialData = [
  { sku:'E-001', name:'Bluetooth Headset', category:'Electronics', price:1299, stock:12, sold:34 },
  { sku:'G-101', name:'Organic Honey 500g', category:'Groceries', price:399, stock:35, sold:14 },
  { sku:'C-210', name:'Denim Jeans', category:'Clothing', price:899, stock:8, sold:21 },
  { sku:'A-501', name:'Phone Case', category:'Accessories', price:249, stock:42, sold:55 },
  { sku:'S-999', name:'Notebook A5', category:'Stationery', price:59, stock:120, sold:9 },
  { sku:'E-002', name:'Portable Charger', category:'Electronics', price:799, stock:18, sold:46 },
];

let store = JSON.parse(JSON.stringify(initialData)); // deep copy

// DOM refs
const panels = document.querySelectorAll('[data-panel]');
const tabs = document.querySelectorAll('.tab-btn');
const inventoryBody = document.getElementById('inventory-body');
const totalBadge = document.getElementById('total-items-badge');
const stats = {
  total: document.getElementById('stat-total'),
  stock: document.getElementById('stat-stock'),
  revenue: document.getElementById('stat-revenue')
};
const pieCanvas = document.getElementById('pieChart');
const barCanvas = document.getElementById('barChart');
const summaryText = document.getElementById('summary-text');
const lowStockList = document.getElementById('low-stock-list');

// Tab navigation
tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    const choice = tab.dataset.tab;
    panels.forEach(p => {
      if (p.id === choice) p.hidden = false;
      else p.hidden = true;
    });
    if (choice === 'summary') renderSummary();
  });
});

// Utility helpers
function formatMoney(n){ return '‚Çπ' + Number(n).toLocaleString('en-IN'); }

// Render inventory table
function renderInventory(){
  inventoryBody.innerHTML = '';
  store.forEach((item, idx) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="small">${item.sku}</td>
      <td>${item.name}</td>
      <td><span class="pill">${item.category}</span></td>
      <td>${item.price}</td>
      <td>${item.stock}</td>
      <td>${item.sold}</td>
      <td style="text-align:right">
        <button class="remove" data-idx="${idx}" title="Remove item">Remove</button>
      </td>
    `;
    inventoryBody.appendChild(tr);
  });
  // attach remove handlers
  inventoryBody.querySelectorAll('.remove').forEach(btn => {
    btn.addEventListener('click', () => {
      const i = Number(btn.dataset.idx);
      if (confirm('Remove ' + store[i].name + ' ('+store[i].sku+')?')) {
        store.splice(i,1);
        refreshAll();
      }
    });
  });
  totalBadge.textContent = store.length;
}

// Stats
function computeStats(){
  const totalItems = store.length;
  const totalStock = store.reduce((s,i)=>s + (i.stock||0),0);
  const revenue = store.reduce((s,i)=>s + (i.sold || 0) * (i.price || 0),0);
  return { totalItems, totalStock, revenue };
}
function renderStats(){
  const s = computeStats();
  stats.total.textContent = s.totalItems;
  stats.stock.textContent = s.totalStock;
  stats.revenue.textContent = formatMoney(s.revenue);
}

// Charts drawing (simple, independent of libs)
function drawPie(canvas, dataMap){
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio||1;
  const W = canvas.width;
  const H = canvas.height;
  canvas.width = W * DPR; canvas.height = H * DPR;
  canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);
  ctx.clearRect(0,0,W,H);

  const cx = W/2;
  const cy = H/2;
  const radius = Math.min(W,H)/3.2;

  const entries = Array.from(dataMap.entries()).filter(([k,v])=>v>0);
  const total = entries.reduce((s,e)=> s + e[1], 0);
  if (total===0){
    ctx.fillStyle = 'rgba(255,255,255,0.05)';
    ctx.font = '13px system-ui';
    ctx.fillText('No sales data to show', cx - 50, cy);
    return;
  }

  // colors generator
  const colors = [
    '#60a5fa','#6ee7b7','#f59e0b','#f97316','#f472b6','#34d399','#fb7185','#a78bfa'
  ];

  let start = -Math.PI/2;
  entries.forEach((entry,i) => {
    const [label, val] = entry;
    const slice = (val/total) * Math.PI * 2;
    const end = start + slice;
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,radius,start,end);
    ctx.closePath();
    ctx.fillStyle = colors[i % colors.length];
    ctx.fill();

    // label lines
    const mid = (start + end)/2;
    const lx = cx + Math.cos(mid) * (radius + 12);
    const ly = cy + Math.sin(mid) * (radius + 12);
    ctx.beginPath();
    ctx.moveTo(cx + Math.cos(mid) * radius, cy + Math.sin(mid) * radius);
    ctx.lineTo(lx,ly);
    ctx.strokeStyle = 'rgba(255,255,255,0.06)';
    ctx.lineWidth = 1;
    ctx.stroke();

    ctx.font = '12px system-ui';
    ctx.fillStyle = '#e6eef8';
    const percent = Math.round((val/total)*100);
    const text = `${label} (${percent}%)`;
    ctx.fillText(text, lx + (Math.cos(mid)>0?6:-ctx.measureText(text).width - 6), ly + 4);

    start = end;
  });
}

function drawBar(canvas, items){
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio||1;
  const W = canvas.width;
  const H = canvas.height;
  canvas.width = W * DPR; canvas.height = H * DPR;
  canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);
  ctx.clearRect(0,0,W,H);

  // items: [{label, value}, ...] assumed sorted descending
  const padding = 40;
  const barAreaW = W - padding*2;
  const barAreaH = H - padding*2;
  const maxVal = Math.max(...items.map(i=>i.value), 1);
  const barWidth = Math.max(18, Math.floor(barAreaW / Math.max(1, items.length)) - 12);

  // axes
  ctx.strokeStyle = 'rgba(255,255,255,0.06)';
  ctx.beginPath();
  ctx.moveTo(padding, padding);
  ctx.lineTo(padding, padding + barAreaH);
  ctx.lineTo(padding + barAreaW, padding + barAreaH);
  ctx.stroke();

  ctx.font = '12px system-ui';
  ctx.fillStyle = 'rgba(255,255,255,0.7)';

  items.forEach((it, index) => {
    const x = padding + index * (barWidth + 12) + 8;
    const h = Math.round((it.value / maxVal) * (barAreaH - 20));
    const y = padding + barAreaH - h;
    // bar
    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(x, y, barWidth, h);
    // label
    ctx.fillStyle = '#e6eef8';
    const label = it.label.length > 12 ? it.label.slice(0,12)+'‚Ä¶' : it.label;
    ctx.fillText(label, x, padding + barAreaH + 16);
    // value
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    ctx.fillText(it.value, x, y - 6);
  });
}

// Compute data for charts
function getCategorySalesMap(){
  const map = new Map();
  store.forEach(it => {
    const s = map.get(it.category) || 0;
    map.set(it.category, s + (it.sold || 0));
  });
  return map;
}
function getTopItemsBySales(limit=6){
  return store
    .map(it => ({ label: it.name, value: it.sold || 0 }))
    .sort((a,b)=>b.value - a.value)
    .slice(0,limit);
}

// Render charts
function renderCharts(){
  drawPie(pieCanvas, getCategorySalesMap());
  drawBar(barCanvas, getTopItemsBySales(8));
}

// Summary rendering
function renderSummary(){
  const total = computeStats();
  const topItems = getTopItemsBySales(3).filter(i=>i.value>0);
  const categories = Array.from(getCategorySalesMap().entries()).sort((a,b)=>b[1]-a[1]);
  const topCat = categories[0] ? categories[0][0] : '‚Äî';

  let html = `
    <strong>Overview:</strong>
    <div style="margin-top:8px">You have <strong>${total.totalItems}</strong> product SKUs with <strong>${total.totalStock}</strong> units in stock. Estimated revenue from recorded sales is <strong>${formatMoney(total.revenue)}</strong>.</div>
    <div style="margin-top:10px"><strong>Top category:</strong> ${topCat}</div>
  `;

  if (topItems.length){
    html += '<div style="margin-top:8px"><strong>Top selling items:</strong><ol style="margin:6px 0 0 18px">';
    topItems.forEach(it => html += `<li>${it.label} ‚Äî ${it.value} sold</li>`);
    html += '</ol></div>';
  } else {
    html += '<div style="margin-top:8px">No sales recorded yet.</div>';
  }

  summaryText.innerHTML = html;

  // low stock: threshold 10
  const low = store.filter(i => i.stock <= 10).sort((a,b)=>a.stock-b.stock);
  if (low.length){
    lowStockList.innerHTML = '<ul style="margin:6px 0 0 18px">' + low.map(i => `<li>${i.name} (${i.sku}) ‚Äî ${i.stock} left</li>`).join('') + '</ul>';
  } else {
    lowStockList.innerHTML = '<div class="muted">No low stock items</div>';
  }
}

// Actions
function refreshAll(){
  renderInventory();
  renderStats();
  renderCharts();
  renderSummary();
}

// Add item form
document.getElementById('add-item-btn').addEventListener('click', () => {
  const sku = document.getElementById('inp-sku').value.trim();
  const name = document.getElementById('inp-name').value.trim();
  const category = document.getElementById('inp-category').value;
  const price = Number(document.getElementById('inp-price').value) || 0;
  const stock = Math.max(0, Number(document.getElementById('inp-stock').value) || 0);
  const sold = Math.max(0, Number(document.getElementById('inp-sold').value) || 0);

  if (!sku || !name) { alert('Please provide SKU and Name'); return; }
  if (store.some(i => i.sku.toLowerCase() === sku.toLowerCase())) {
    if (!confirm('SKU already exists ‚Äî create duplicate?')) return;
  }
  store.push({ sku, name, category, price, stock, sold });
  // clear
  document.getElementById('inp-sku').value = '';
  document.getElementById('inp-name').value = '';
  document.getElementById('inp-price').value = '';
  document.getElementById('inp-stock').value = '';
  document.getElementById('inp-sold').value = '';
  refreshAll();
  // automatically switch to inventory
  document.querySelector('.tab-btn[data-tab="inventory"]').click();
});

// clear form
document.getElementById('clear-form').addEventListener('click', () => {
  ['inp-sku','inp-name','inp-price','inp-stock','inp-sold'].forEach(id => document.getElementById(id).value = '');
});

// restock all (simple demo)
document.getElementById('restock-all').addEventListener('click', () => {
  store = store.map(i => ({ ...i, stock: i.stock + 20 }));
  refreshAll();
});

// reset sample
document.getElementById('reset-sample').addEventListener('click', () => {
  if (!confirm('Reset to original sample data? This will remove current changes.')) return;
  store = JSON.parse(JSON.stringify(initialData));
  refreshAll();
});

// initial mount
refreshAll();

// Accessibility: allow keyboard selection of tabs
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.tabIndex = 0;
  btn.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') btn.click();
  });
});

// Make charts responsive on resize (debounced)
let resizeTimer;
window.addEventListener('resize', () => {
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(() => renderCharts(), 180);
});
</script>
</body>
</html>
